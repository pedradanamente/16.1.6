



use BD2
go

if OBJECT_ID('tg_cliente') is not null
	drop trigger tg_cliente
go

CREATE TRIGGER TG_CLIENTE ON cliente AFTER INSERT 
AS
	DECLARE @ID_CLIENTE INT , @SALDO NUMERIC(10,2), @ID_SALARIO INT;
BEGIN
		SELECT @ID_CLIENTE = ID, @ID_SALARIO = SALARIO_ID FROM INSERTED
		SELECT @SALARIO = VALOR FROM SALARIO WHERE ID = @ID_SALARIO
		
		INSERT INTO MOVIMENTO_SALDO (ID_CLIENTE, SALDO, OPERACAO) 
			VALUES (@ID_CLIENTE, @SALARIO, 'C') 

END



use BD2
go

CREATE TABLE MOVIMENTO_SALDO
(
	ID_CLIENTE INT ,
	SALDO NUMERIC (10,2),
	DATA DATETIME DEFAULT (GETDATE()),
	OPERACAO VARCHAR (30)
)

CREATE TABLE PAGAMENTO
(
	ID_VENDA INT,
	DATA DATETIME DEFAULT (GETDATE())
)

CREATE TABLE VENDA
(
	ID_CLIENTE INT,
	DATA DATETIME DEFAULT (GETDATE()),
	VALOR NUMERIC (10,2),
	ID INT IDENTITY(1,1) PRIMARY KEY
)

INSERT INTO MOVIMENTO_SALDO (ID_CLIENTE, OPERACAO, SALDO) VALUES (1, 'OPER', 500.00)
GO

SELECT * FROM MOVIMENTO_SALDO
GO